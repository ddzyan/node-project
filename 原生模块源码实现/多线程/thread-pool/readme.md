## 简介

使用 node 中 worker_thread 模块为基础，实现进程池。

核心内容：

1. 主线程维护一个队列，子线程的任务由主线程派发，不需要互斥访问，子线程也不需要维护自己的队列。
2. 主线程负责检查子线程空闲时间是否达到阈值，是则子线程退出
3. 任务数设计，主线程负责管理任务个数并且有相应的策略
4. 选择线程，优先选择空闲的线程，再选择任务数量少的线程
5. 线程池设计，cpu 密集型的，线程数等于核心数，否则自定义线程数
6. 支持任务的取消和超时机制，超时或者取消的时候，主线程判断任务是待执行还是正在执行，如果是待执行则从任务队列中删除，如果是正在执行则杀死对应的子线程。

## 使用

```sh
node ./test.js
```
